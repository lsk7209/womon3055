/**
 * í˜ë¥´ì†Œë‚˜ ë¶„ë¥˜ ì‹œìŠ¤í…œ
 * ì ìˆ˜ ê¸°ë°˜ 4ê°€ì§€ ìœ í˜• ë¶„ë¥˜
 */

import type { PersonaType } from "./storage";

export interface Persona {
    type: PersonaType;
    title: string;
    subtitle: string;
    description: string;
    characteristics: string[];
    recommendations: string[];
    icon: string;
}

export const PERSONAS: Record<PersonaType, Persona> = {
    "super-balancer": {
        type: "super-balancer",
        title: "ìŠˆí¼ ë°¸ëŸ°ì„œ",
        subtitle: "ìƒìœ„ 10%, íšŒë³µë ¥ ìš°ìˆ˜",
        description:
            "ì¶•í•˜ë“œë ¤ìš”! ğŸ’ ì§€ê¸ˆ ëª¸ ìƒíƒœê°€ ì •ë§ ì¢‹ì•„ìš”. ì´ë ‡ê²Œ ê±´ê°•í•œ ë°¸ëŸ°ìŠ¤ë¥¼ ìœ ì§€í•˜ëŠ” ê±´ ì‰¬ìš´ ì¼ì´ ì•„ë‹ˆì—ìš”. ì§€ê¸ˆì²˜ëŸ¼ë§Œ ê³„ì† ê´€ë¦¬í•˜ì‹œë©´ ë©ë‹ˆë‹¤.",
        characteristics: [
            "ë°¤ì— ì˜ ì£¼ë¬´ì‹œê³  ì•„ì¹¨ì— ê°œìš´í•˜ê²Œ ì¼ì–´ë‚˜ì„¸ìš”",
            "ê°ì • ê¸°ë³µì´ ê±°ì˜ ì—†ê³  ë§ˆìŒì´ í¸ì•ˆí•´ìš”",
            "í”¼ê³¤í•´ë„ í•˜ë£¨ ì‰¬ë©´ ê¸ˆë°© íšŒë³µë¼ìš”",
            "\"ìš”ì¦˜ ì™œ ì´ëŸ´ê¹Œ?\" í•˜ëŠ” ê³ ë¯¼ì´ ë³„ë¡œ ì—†ì–´ìš”",
        ],
        recommendations: [
            "ì§€ê¸ˆ í•˜ì‹œëŠ” ê²ƒë“¤ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì„¸ìš” - ì˜í•˜ê³  ê³„ì„¸ìš”!",
            "1ë…„ì— í•œ ë²ˆ ì •ê¸° ê²€ì§„ìœ¼ë¡œ ë¯¸ë¦¬ë¯¸ë¦¬ ì²´í¬í•˜ì„¸ìš”",
            "ë°”ì˜ë”ë¼ë„ ë‚˜ë§Œì˜ ì‰¬ëŠ” ì‹œê°„ì„ ê¼­ ì±™ê¸°ì„¸ìš”",
            "ì¢‹ì•„í•˜ëŠ” ìŒì‹ ê³¨ê³ ë£¨ ë“œì‹œë©´ì„œ ì˜ì–‘ ë°¸ëŸ°ìŠ¤ ìœ ì§€í•˜ì„¸ìš”",
        ],
        icon: "âœ¨",
    },
    "sensitive-catch": {
        type: "sensitive-catch",
        title: "ì„¼ì„œí‹°ë¸Œ ìºì¹˜",
        subtitle: "ì´ˆê¸° ë³€í™” ë¯¼ê° ê°ì§€",
        description:
            "ëª¸ì´ ë³´ë‚´ëŠ” ì‹ í˜¸ë¥¼ ë¹ ë¥´ê²Œ ì•Œì•„ì°¨ë¦¬ì…¨ë„¤ìš” ğŸ‘ ì§€ê¸ˆì´ ê°€ì¥ ì¤‘ìš”í•œ ì‹œê¸°ì˜ˆìš”. ì¡°ê¸ˆë§Œ ì‹ ê²½ ì“°ë©´ ê¸ˆë°© ì¢‹ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”.",
        characteristics: [
            "\"ì–´? ë­”ê°€ ë‹¬ë¼ì§„ ê²ƒ ê°™ì€ë°?\" í•˜ëŠ” ëŠë‚Œì´ ìì£¼ ë“¤ì–´ìš”",
            "ìš”ì¦˜ ì ì´ ì˜ˆì „ë§Œí¼ í‘¹ ì•ˆ ì™€ìš”",
            "ë³„ì¼ ì•„ë‹Œë°ë„ ì§œì¦ì´ ë‚˜ê±°ë‚˜ ìš°ìš¸í•  ë•Œê°€ ìˆì–´ìš”",
            "\"ì™œ ì´ë ‡ê²Œ í”¼ê³¤í•˜ì§€?\" í•˜ëŠ” ë‚ ì´ ëŠ˜ì—ˆì–´ìš”",
        ],
        recommendations: [
            "ë§¤ì¼ ê°™ì€ ì‹œê°„ì— ìê³  ì¼ì–´ë‚˜ëŠ” ìŠµê´€ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”",
            "í•˜ë£¨ 10ë¶„ì´ë¼ë„ ë‚˜ë§Œì˜ ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”",
            "ë¹„íƒ€ë¯¼ Dì™€ ë§ˆê·¸ë„¤ìŠ˜ - ë¶€ì¡±í•˜ê¸° ì‰¬ìš´ ì˜ì–‘ì†Œì˜ˆìš”",
            "ì‚°ì±…ì´ë‚˜ ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ëª¸ì„ í’€ì–´ì£¼ì„¸ìš”",
        ],
        icon: "ğŸ¯",
    },
    "deep-recoverer": {
        type: "deep-recoverer",
        title: "ë”¥ ë¦¬ì»¤ë²„ëŸ¬",
        subtitle: "ì²œì²œíˆ íšŒë³µí•˜ì§€ë§Œ ê°œì„  í­ í¼",
        description:
            "ì§€ê¸ˆ ë§ì´ í˜ë“œì‹œì£ ? ğŸ˜” ê´œì°®ì•„ìš”, í˜¼ìê°€ ì•„ë‹ˆì—ìš”. ì²œì²œíˆ í•˜ë‚˜ì”© ê°œì„ í•´ë‚˜ê°€ë©´ ë¶„ëª… ì¢‹ì•„ì§ˆ ê±°ì˜ˆìš”. í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”!",
        characteristics: [
            "ë°¤ì— ì ì„ ì„¤ì¹˜ê±°ë‚˜ ìì£¼ ê¹¨ìš”",
            "ì•„ì¹¨ì— ì¼ì–´ë‚˜ë„ í”¼ê³¤ì´ ì•ˆ í’€ë ¤ìš”",
            "ì–¼êµ´ì´ í™”ëˆê±°ë¦¬ê±°ë‚˜ ë¶ˆí¸í•œ ì¦ìƒì´ ìˆì–´ìš”",
            "\"ë¨¸ë¦¬ê°€ ë©í•˜ë‹¤\" \"ì§‘ì¤‘ì´ ì•ˆ ëœë‹¤\" í•˜ëŠ” ë‚ ì´ ë§ì•„ìš”",
        ],
        recommendations: [
            "í˜¼ì ê³ ë¯¼í•˜ì§€ ë§ê³  ì „ë¬¸ì˜ì™€ ìƒë‹´í•´ë³´ì„¸ìš”",
            "ì´ì†Œí”Œë¼ë³¸, ì˜¤ë©”ê°€3 - ë„ì›€ì´ ë  ìˆ˜ ìˆì–´ìš”",
            "ì¹¨ì‹¤ ì˜¨ë„ë¥¼ ë‚®ì¶”ê³  ì¡°ëª…ì„ ì–´ë‘¡ê²Œ í•´ë³´ì„¸ìš”",
            "ìš”ê°€ë‚˜ ëª…ìƒ ì•±ìœ¼ë¡œ ë§ˆìŒì„ í¸ì•ˆí•˜ê²Œ í•´ë³´ì„¸ìš”",
        ],
        icon: "ğŸŒ±",
    },
    "late-bloomer": {
        type: "late-bloomer",
        title: "ë ˆì´íŠ¸ ë¸”ë£¨ë¨¸",
        subtitle: "ëŠ¦ê²Œ ì‹œì‘í–ˆì§€ë§Œ ì§€ê¸ˆë¶€í„°ë¼ë„",
        description:
            "ì¡°ê¸ˆ ëŠ¦ì—ˆë‹¤ê³  ìƒê°í•˜ì‹¤ ìˆ˜ ìˆì§€ë§Œ, ì§€ê¸ˆ ì‹œì‘í•˜ëŠ” ê²Œ ê°€ì¥ ë¹ ë¥¸ ê±°ì˜ˆìš” ğŸ’ª ì‘ì€ ë³€í™”ë¶€í„° ì²œì²œíˆ ì‹œì‘í•´ë´ìš”. í•  ìˆ˜ ìˆì–´ìš”!",
        characteristics: [
            "\"ì´ê²Œ ë‚˜ì´ ë•Œë¬¸ì¸ê°€?\" í•˜ëŠ” ìƒê°ì´ ìì£¼ ë“¤ì–´ìš”",
            "ì˜ˆì „ì—” ê´œì°®ì•˜ëŠ”ë° ìš”ì¦˜ ì—¬ëŸ¬ ì¦ìƒì´ ìƒê²¼ì–´ìš”",
            "ê±´ê°• ê´€ë¦¬ë¥¼ ì œëŒ€ë¡œ í•´ë³¸ ì ì´ ì—†ì–´ìš”",
            "\"ì§€ê¸ˆì´ë¼ë„ ë­”ê°€ í•´ì•¼ í•˜ëŠ”ë°\" í•˜ëŠ” ë§ˆìŒì´ ë“¤ì–´ìš”",
        ],
        recommendations: [
            "ì™„ë²½í•˜ê²Œ í•˜ë ¤ê³  í•˜ì§€ ë§ê³  ì‘ì€ ê²ƒë¶€í„° ì‹œì‘í•˜ì„¸ìš”",
            "ì „ë¬¸ì˜ ìƒë‹´ìœ¼ë¡œ ì •í™•í•œ ìƒíƒœë¥¼ ë¨¼ì € íŒŒì•…í•˜ì„¸ìš”",
            "í•˜ë£¨ í•œ ê°€ì§€ì”©ë§Œ ë°”ê¿”ë³´ì„¸ìš” - ë¬¼ ë§ì´ ë§ˆì‹œê¸°ë¶€í„°!",
            "ê°™ì€ ê³ ë¯¼ì„ ê°€ì§„ ì‚¬ëŒë“¤ê³¼ ì´ì•¼ê¸° ë‚˜ëˆ ë³´ì„¸ìš”",
        ],
        icon: "ğŸŒ¸",
    },
    "body-age": {
        type: "body-age",
        title: "ì²´í˜• ë‚˜ì´ ë¶„ì„",
        subtitle: "ì‹ ì²´ ë°ì´í„° ê¸°ë°˜ ë¶„ì„",
        description: "ë³µë¶€ë‘˜ë ˆì™€ ì‹ ì²´ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¸¡ì •í•œ ì²´í˜• ë‚˜ì´ì…ë‹ˆë‹¤.",
        characteristics: [],
        recommendations: [],
        icon: "âš–ï¸",
    },
};

/**
 * ì ìˆ˜ ê¸°ë°˜ í˜ë¥´ì†Œë‚˜ ë¶„ë¥˜
 * @param score ì´ì  (0-24 ë²”ìœ„, 8ê°œ ë¬¸í•­ Ã— 0-3ì )
 * @param age ì—°ë ¹ (ì„ íƒ)
 */
export function classifyPersona(score: number, age?: number): PersonaType {
    // ì—°ë ¹ë³„ ê°€ì¤‘ì¹˜ (ì„ íƒì )
    let adjustedScore = score;
    if (age) {
        if (age >= 50) {
            adjustedScore = score * 0.9; // 50ëŒ€ëŠ” ì¦ìƒì´ ìì—°ìŠ¤ëŸ¬ìš°ë¯€ë¡œ ì•½ê°„ ì™„í™”
        } else if (age < 40) {
            adjustedScore = score * 1.1; // 30ëŒ€ëŠ” ì¦ìƒì´ ë” ë¯¼ê°í•˜ê²Œ ë°˜ì˜
        }
    }

    // ì ìˆ˜ ë²”ìœ„ë³„ ë¶„ë¥˜
    if (adjustedScore <= 6) {
        return "super-balancer"; // 0-6ì : ë§¤ìš° ì–‘í˜¸
    } else if (adjustedScore <= 12) {
        return "sensitive-catch"; // 7-12ì : ì´ˆê¸° ë³€í™”
    } else if (adjustedScore <= 18) {
        return "deep-recoverer"; // 13-18ì : ì¤‘ê°„ ë‹¨ê³„
    } else {
        return "late-bloomer"; // 19-24ì : ë³¸ê²©í™” ë‹¨ê³„
    }
}

/**
 * í˜ë¥´ì†Œë‚˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
 */
export function getPersona(type: PersonaType): Persona {
    return PERSONAS[type];
}

/**
 * ëª¨ë“  í˜ë¥´ì†Œë‚˜ ëª©ë¡
 */
export function getAllPersonas(): Persona[] {
    return Object.values(PERSONAS);
}

/**
 * í˜ë¥´ì†Œë‚˜ë³„ ìƒ‰ìƒ (UIìš©)
 */
export function getPersonaColor(type: PersonaType): string {
    const colors: Record<PersonaType, string> = {
        "super-balancer": "text-green-600 bg-green-50",
        "sensitive-catch": "text-blue-600 bg-blue-50",
        "deep-recoverer": "text-orange-600 bg-orange-50",
        "late-bloomer": "text-rose-600 bg-rose-50",
        "body-age": "text-gray-600 bg-gray-50",
    };
    return colors[type];
}

/**
 * í˜ë¥´ì†Œë‚˜ë³„ ê·¸ë˜í”„ ìƒ‰ìƒ
 */
export function getPersonaChartColor(type: PersonaType): string {
    const colors: Record<PersonaType, string> = {
        "super-balancer": "#10b981",
        "sensitive-catch": "#3b82f6",
        "deep-recoverer": "#f97316",
        "late-bloomer": "#f43f5e",
        "body-age": "#888888",
    };
    return colors[type];
}
